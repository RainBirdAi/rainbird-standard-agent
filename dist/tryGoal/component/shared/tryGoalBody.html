<div ng-if="display === 'init data'" class="clearfix">
    <p class="rb-note-default">Tell me more...</p>
    <div class="col-sm-12">
        <p class="question-prompt" ng-if="objectPrompt">{{objectPrompt.charAt(0).toUpperCase() + objectPrompt.slice(1)}} :
            <input id="userProvided" type="text" ng-model="init.objectInstance" placeholder="Enter {{objectPrompt}}..." autofocus/>
        </p>
        <p class="question-prompt" ng-if="subjectPrompt">{{subjectPrompt.charAt(0).toUpperCase() + subjectPrompt.slice(1)}}  :
            <input id="userProvided" type="text" ng-model="init.subjectInstance" placeholder="Enter {{subjectPrompt}}..." autofocus/>
        </p>
    </div>
</div>
<div class="result clearfix" ng-if="display === 'result'">
    <p class="results-title">Your Results</p>
    <ul class="results-list">
        <li class="result" ng-repeat="response in goalResults">
            <span>{{response.text}}</span>
            <span class="result-cf" ng-hide="config.uiSettings.hideCF">{{response.cf}}%</span>
            <a ng-show="config.showEvidence" target="_blank" ng-href="/applications/components/rainbird-analysis-ui/whyAnalysis.html?id={{response.factID}}?api={{yolandaUrl}}"><span class="tooltipHolder why-analysis-icon result-analysis glyphicon glyphicon-info-sign"><span class="tooltipText">Show Evidence Tree</span></span></a>
            <div ng-repeat="meta in response.meta.en">
                <div class="markdown-metadata" ng-if="meta.dataType === 'md'" markdown-to-html="meta.data"></div>
                <div class="text-metadata" ng-if="meta.dataType === 'text'">{{meta.data}}</div>
            </div>
        </li>
    </ul>
</div>

<div ng-if="display === 'end'" class="clearfix">
    <div class="col-sm-12">
        <p>Sorry, I've been unable to find an answer to your question!</p>
    </div>
</div>

<!-- Second form questions -->

<div ng-if="display === 'secondForm'" class="clearfix">

    <p ng-if="response.question.prompt" class="rb-note-default question-prompt">{{response.question.prompt}}</p>

    <div id="secondFormBlock" class="col-sm-12" ng-if="response.question.dataType === 'string'">
        <!-- Concept type question - Singular -->
        <select id="singularAnswerSelect" class="rb-try-goal-full-width" ng-if="!response.question.plural && response.question.concepts" ng-model="answer.selection"
                ng-options="concept.value as concept.value disable when concept.invalidResponse for concept in response.question.concepts">
            <option value=""></option>
        </select>
        <!-- Concept type question - Plural -->
        <div ng-if="response.question.plural" class="inlineCheckboxGrouped" ng-repeat="concept in response.question.concepts" style="white-space: nowrap;">
            <label>
                <input class="rb-try-goal-full-width"
                    value="concept.value" type="checkbox" ng-click="selectConcept(concept.value, $index)" ng-disabled="conceptIsKnownAnswer(concept.value)" ng-checked="conceptIsKnownAnswer(concept.value)">
                <span>{{concept.value}}</span>
            </label>
        </div>
        <!-- CanAdd Plural Input - Extra inputs added when data is added -->
        <div ng-if="response.question.canAdd && response.question.plural" class="inlineCheckboxGrouped" >
            <label>
                <i class="fa fa-minus-square" aria-hidden="true" ng-click="selectConcept(otherValues[0], (response.question.concepts ? response.question.concepts.length : 0)); removeOtherInput(0);"></i>
                <input ng-model="otherValues[0]" placeholder="enter other value" class="rb-try-goal-full-width" ng-change="selectConcept(otherValues[0], (response.question.concepts ? response.question.concepts.length : 0)); addOtherInput([0]);"
                       value="" type="text" autofocus>
            </label>
        </div>
        <div class="col-sm-12 rb-try-goal-other" ng-show="answer.selection.indexOf(otherOption.value) > -1" style="padding: 0;">
            <p class="rb-note-default">Other:</p>
            <input id="answerOther" class="rb-try-goal-full-width" type="text" ng-model="answer.otherValue" />
        </div>
    </div>

    <div class="col-sm-12" ng-if="response.question.dataType === 'string' && !response.question.concepts && !response.question.plural">
        <input id="dateAnswer" class="rb-try-goal-full-width" type="text" ng-model="otherValues[0]" ng-change="selectConcept(otherValues[0], 0);" autofocus />
    </div>


    <!-- Number type question -->
    <div class="col-sm-12" ng-if="response.question.dataType === 'number'">
        <!-- any edits to the number input line should be replicated in tryGoalController.js -->
        <div id="numberInputs">
            <input ng-if="response.question.plural" id="numberInput0" class="rb-try-goal-full-width numberInput" rb-number-only type="number" ng-model="answer.selection[0]" class="rb_input number" />
            <input ng-if="!response.question.plural" id="numberInput0" class="rb-try-goal-full-width numberInput" rb-number-only type="number" ng-model="answer.value" class="rb_input number" />
        </div>
        <div ng-include="'/applications/tryGoal/component/shared/addRemovePluralButtons.html'"></div>
    </div>

    <!-- Date type question -->
    <div class="col-sm-12" ng-if="response.question.dataType === 'date'">
        <!-- any edits to the date input line should be replicated in tryGoalController.js -->
        <div id="dateInputs">
            <div class="instanceDatepicker" id="dateInput0">
                <input id="dateInputText0" ng-if="response.question.plural" type="text" class="form-control" uib-datepicker-popup ng-model="answer.selection[0]"
                       is-open="datePicker.instances[0]" datepicker-options="datePicker.options" ng-required="true" close-text="Close" show-button-bar="false"
                       placeholder="yyyy-MM-dd" popup-placement="auto bottom-left" ng-model-options="{timezone: 'utc'}"/>
                <input id="dateInputText0" ng-if="!response.question.plural" type="text" class="form-control" uib-datepicker-popup ng-model="answer.value"
                       is-open="datePicker.instances[0]" datepicker-options="datePicker.options" ng-required="true" close-text="Close" show-button-bar="false"
                       placeholder="yyyy-MM-dd" popup-placement="auto bottom-left" ng-model-options="{timezone: 'utc'}"/>
                <button id="datePicker0" type="button" class="btn btn-default displayPicker" ng-click="datePicker.open($event, 0)">
                    <i class="glyphicon glyphicon-calendar"></i>
                </button>
            </div>
        </div>
        <div ng-include="'/applications/tryGoal/component/shared/addRemovePluralButtons.html'"></div>
    </div>
</div>

<!-- Yes/No questions -->

<div ng-if="display === 'firstForm' || (display === 'secondForm' && response.question.dataType === 'truth')" class="clearfix">

    <div>
        <p ng-if="response.question.prompt" class="rb-note-default">{{response.question.prompt}}</p>

        <div class="form-group col-sm-12">
            <div>
                <label><input id="answerYes" class="rb-try-radio" type='radio' name='value' value='yes' ng-model="answer.selection">Yes</label>
            </div>
            <div>
                <label><input id="answerNo" class="rb-try-radio" type='radio' name='value' value='no' ng-model="answer.selection">No</label>
            </div>
        </div>
    </div>

    <div ng-repeat="meta in response.question.objectMetadata.en">
        <div class="markdown-metadata" ng-if="meta.dataType === 'md'" markdown-to-html="meta.data"></div>
        <div class="text-metadata" ng-if="meta.dataType === 'text'">{{meta.data}}</div>
    </div>
</div>

<div ng-if="display === 'firstForm' || display === 'secondForm'" class="clearfix">
    <div class="col-sm-12 rb-goal-try-cfdiv question-certainty" ng-if="response.question.allowCF">
        <p>How sure are you?</p>
        <input id="cfbar" class='rb-shared-try-goal-cf-input noTransition' name='cf' type="range" min="1" max="100" step="1" value="100" ng-model="answer.cf"/>
        <output class='rb-try-goal-cf-output question-cf-text'>{{answer.cf}}%</output>
    </div>
</div>
<div class="row clearfix" ng-if="display === 'thinking'">
    <div class="col-sm-12">
        <p>Rainbird is thinking...</p>
        <p>
            <img src="/applications/img/ajax-loader.gif" />
        </p>
    </div>
</div>
<div class="row clearfix" ng-if="display === 'error'">
    <div class="col-sm-12">
        <p>{{errorMessage}}</p>
    </div>
</div>
